# DO NOT EDIT THIS FILE

SUBMIT  := src/FileLineIterator.java src/TweetParser.java src/MarkovChain.java src/TwitterBot.java test/FileLineIteratorTest.java test/MarkovChainTest.java test/TweetParserTest.java test/TwitterBotTest.java

JAVA	:= java
JAVAC	:= javac
JUNIT   := /home/codio/bin/junit-platform-console-standalone-1.6.1.jar

DEPENDS := src/*.java

TESTS := \
	test/FileLineIteratorTest.java \
	test/MarkovChainTest.java \
	test/TweetParserTest.java \
	test/TwitterBotTest.java

HWNAME := hw08
ts := $(shell /bin/date "+%Y-%m-%d-%H:%M:%S")

ZIPNAME := $(HWNAME)-submit($(ts)).zip

.PHONY: all bin/TwitterBot.class clean zip

all: bin bin/TwitterBot.class

bin:
	mkdir bin

bin/TwitterBot.class : $(DEPENDS) bin
	$(JAVAC) -cp "include/*" -d bin $(DEPENDS)

run : bin/TwitterBot.class
	java -cp "bin:include/*" TwitterBot
	
# visualize : 
# 	java -cp "bin:include/*" MarkovVisualizer

zip: $(SUBMIT)
	zip '$(ZIPNAME)' $(SUBMIT)
	
test: bin/TwitterBot.class $(TESTS) $(JUNIT) bin 
	$(JAVAC) -d bin -cp "$(JUNIT):bin:include/*" $(TESTS)
	$(JAVA) -cp "bin:include/*:$(JUNIT)" org.junit.platform.console.ConsoleLauncher --scan-class-path --disable-banner

checkstyle: ~/bin/checkstyle.sh ~/bin/cis120-checkstyle-config.xml ~/bin/checkstyle-8.12-all.jar
	cd ~/bin && ./checkstyle.sh

clean:
	rm -f src/*.class bin/* test/*.class bin/*
	rm -rf *.zip
