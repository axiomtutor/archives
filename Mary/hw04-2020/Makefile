# DO NOT EDIT THIS FILE

SUBMIT      := imp.ml queueTest.ml linkedQueue.ml simpleQueue.ml dequeTest.ml deque.ml graph.ml

DEPENDS := \
	assert.ml \
	assert.mli \
	queueInterface.ml \
	queueInterface.mli \
	imp.ml \
	imp.mli \
	queueTest.ml \
	linkedQueue.ml \
	linkedQueue.mli \
	simpleQueue.ml \
	simpleQueue.mli \
	dequeTest.ml \
	deque.ml \
	deque.mli \
	graph.ml \
	graph.mli 


SHELL := /bin/bash

HWNAME := hw04
ts := $(shell /bin/date "+%Y-%m-%d-%H:%M:%S")

ZIPNAME := $(HWNAME)-submit($(ts)).zip

TIMEOUT = 7
TIMEOUTMSG="ERROR: Tests timed out. Possible causes: inefficient implementation, infinite loop, or raised exception."

.PHONY: all  clean zip

all:	imp.native queueTest.native linkedQueue.native simpleQueue.native dequeTest.native deque.native graph.native

%.native: $(DEPENDS)
	ocamlbuild -r -tag debug $@

run% : %.native $(DEPENDS)
	@(OCAMLRUNPARAM=b ./timeout3 -t $(TIMEOUT) _build/$< || echo -e $(TIMEOUTMSG) ) 2> /dev/null


zip: $(SUBMIT)
	zip '$(ZIPNAME)' $(SUBMIT)

clean:
	ocamlbuild -clean
	rm -rf *.zip

utop: 
	ocamlbuild assert.cmo imp.cmo queueTest.cmo linkedQueue.cmo simpleQueue.cmo \
	deque.cmo dequeTest.cmo graph.cmo queueInterface.cmo
